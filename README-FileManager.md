# Telegraph 文件导航器

这是一个现代化的文件导航器界面，用于替换原有的简单图床界面，提供类似 macOS Finder 的用户体验。

## 🚀 新功能特性

### 1. 现代化界面设计
- **类似 macOS Finder 的设计风格**
- **侧边栏导航** - 快速访问不同文件类型和文件夹
- **工具栏** - 集成上传、新建文件夹、搜索等功能
- **面包屑导航** - 清晰显示当前位置
- **网格/列表视图切换** - 灵活的文件显示方式

### 2. 拖拽上传功能
- **拖拽文件到任意区域即可上传**
- **多文件同时上传支持**
- **实时上传进度显示**
- **上传失败自动重试机制**
- **支持上传到指定文件夹**

### 3. 文件夹管理系统
- **创建自定义文件夹**
- **文件夹重命名和删除**
- **文件夹颜色自定义**
- **文件在文件夹间移动**
- **智能文件分类**（图片、文档、视频、音频）

### 4. 增强的文件操作
- **文件预览** - 图片直接预览，其他文件类型在新窗口打开
- **一键下载文件**
- **复制文件链接到剪贴板**
- **查看详细文件信息**
- **文件收藏功能**
- **右键上下文菜单**

### 5. 完美的响应式设计
- **移动端优化界面**
- **触摸手势支持**
- **移动端侧边栏抽屉式设计**
- **底部操作菜单（移动端）**
- **自适应不同屏幕尺寸**

## 📱 移动端特性

### 手势操作
- **从左边缘右滑** - 打开侧边栏
- **向左滑动** - 关闭侧边栏
- **长按文件** - 显示操作菜单

### 移动端界面
- **顶部导航栏** - 包含菜单按钮和快速上传
- **底部操作菜单** - 替代右键菜单的移动端友好界面
- **大按钮设计** - 适合触摸操作

## 🛠 技术实现

### 前端文件
- `index-new.html` - 新的文件导航器界面
- `file-manager.js` - 文件管理器核心逻辑

### 后端API
- `functions/api/manage/folders.js` - 文件夹管理API
- `functions/api/manage/move-file.js` - 文件移动API
- `functions/upload.js` - 增强的上传功能（支持文件夹分类）

## 🔧 部署说明

### 1. 替换现有界面
将 `index-new.html` 重命名为 `index.html` 替换原有文件：
```bash
mv index-new.html index.html
```

### 2. 确保依赖文件
确保以下文件存在：
- `file-manager.js`
- `functions/api/manage/folders.js`
- `functions/api/manage/move-file.js`

### 3. 环境变量配置
确保已配置必要的环境变量：
- `TG_Bot_Token` - Telegram Bot Token
- `TG_Chat_ID` - Telegram 频道ID
- `img_url` - KV 命名空间绑定

## 📋 使用指南

### 基本操作
1. **上传文件** - 点击"上传文件"按钮或直接拖拽文件到界面
2. **创建文件夹** - 点击"新建文件夹"按钮
3. **搜索文件** - 使用顶部搜索框
4. **切换视图** - 使用网格/列表视图切换按钮

### 文件操作
1. **预览文件** - 单击文件图标
2. **文件菜单** - 右键点击文件（桌面端）或长按（移动端）
3. **移动文件** - 通过右键菜单选择"移动到文件夹"
4. **文件信息** - 右键菜单中选择"文件信息"

### 文件夹管理
1. **创建文件夹** - 工具栏中点击"新建文件夹"
2. **文件夹操作** - 右键点击侧边栏中的自定义文件夹
3. **更改颜色** - 文件夹右键菜单中选择"更改颜色"

## 🎨 界面特色

### 设计理念
- **简洁现代** - 采用现代扁平化设计
- **直观易用** - 符合用户习惯的交互方式
- **响应迅速** - 流畅的动画和交互反馈

### 颜色方案
- **主色调** - #007aff（苹果蓝）
- **辅助色** - #34c759（绿色）、#ff9500（橙色）、#ff3b30（红色）
- **中性色** - #f5f5f7（背景）、#1d1d1f（文字）

## 🔄 兼容性

### 浏览器支持
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

### 设备支持
- 桌面端（Windows、macOS、Linux）
- 平板设备（iPad、Android 平板）
- 移动设备（iPhone、Android 手机）

## 📈 性能优化

### 加载优化
- **懒加载** - 图片和文件按需加载
- **缓存策略** - 合理利用浏览器缓存
- **压缩资源** - CSS 和 JS 文件优化

### 交互优化
- **防抖搜索** - 避免频繁搜索请求
- **虚拟滚动** - 大量文件时的性能优化
- **预加载** - 预先加载可能需要的资源

## 🐛 故障排除

### 常见问题
1. **文件上传失败** - 检查网络连接和 Telegram Bot 配置
2. **文件夹不显示** - 确保 KV 存储正常工作
3. **移动端菜单不工作** - 检查 JavaScript 是否正确加载

### 调试方法
1. 打开浏览器开发者工具
2. 查看控制台错误信息
3. 检查网络请求状态
4. 验证环境变量配置

---

**享受全新的文件管理体验！** 🎉
