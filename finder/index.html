<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegraph Finder - 文件管理器</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 顶部工具栏 -->
    <header class="toolbar">
        <div class="toolbar-left">
            <button id="backBtn" class="btn-icon" title="返回">
                <i class="fas fa-arrow-left"></i>
            </button>
            <button id="forwardBtn" class="btn-icon" title="前进">
                <i class="fas fa-arrow-right"></i>
            </button>
            <div class="breadcrumb" id="breadcrumb">
                <span class="breadcrumb-item">全部文件</span>
            </div>
        </div>
        <div class="toolbar-right">
            <button id="viewModeBtn" class="btn-icon" title="切换视图">
                <i class="fas fa-th"></i>
            </button>
            <button id="uploadBtn" class="btn-primary">
                <i class="fas fa-upload"></i>
                上传图片
            </button>
        </div>
    </header>

    <!-- 主要内容区域 -->
    <main class="main-content">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>图片管理</h3>
                <ul class="nav-list">
                    <li class="nav-item active" data-path="/">
                        <i class="fas fa-images"></i>
                        <span>全部图片</span>
                    </li>
                    <li class="nav-item" data-path="/recent">
                        <i class="fas fa-clock"></i>
                        <span>最近上传</span>
                    </li>
                    <li class="nav-item" data-path="/favorites">
                        <i class="fas fa-star"></i>
                        <span>收藏夹</span>
                    </li>
                </ul>
            </div>

            <div class="sidebar-section">
                <h3>快速操作</h3>
                <ul class="nav-list">
                    <li class="nav-item action-item" data-action="refresh">
                        <i class="fas fa-sync-alt"></i>
                        <span>刷新列表</span>
                    </li>
                    <li class="nav-item action-item" data-action="clear-cache">
                        <i class="fas fa-broom"></i>
                        <span>清理缓存</span>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- 文件显示区域 -->
        <section class="file-area">
            <!-- 加载状态 -->
            <div id="loadingState" class="loading-state">
                <div class="spinner"></div>
                <p>加载中...</p>
            </div>

            <!-- 空状态 -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">
                    <i class="fas fa-images"></i>
                </div>
                <h3>还没有图片</h3>
                <p>拖拽图片到这里或点击上传按钮开始使用</p>
                <button class="btn-primary" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-upload"></i>
                    上传图片
                </button>
            </div>

            <!-- 文件网格 -->
            <div id="fileGrid" class="file-grid" style="display: none;">
                <!-- 动态生成的文件项 -->
            </div>

            <!-- 文件列表视图 -->
            <div id="fileList" class="file-list" style="display: none;">
                <table>
                    <thead>
                        <tr>
                            <th>名称</th>
                            <th>大小</th>
                            <th>类型</th>
                            <th>修改时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="fileListBody">
                        <!-- 动态生成的文件行 -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- 隐藏的文件输入 -->
    <input type="file" id="fileInput" multiple style="display: none;">

    <!-- 上传进度模态框 -->
    <div id="uploadModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>文件上传</h3>
                <button class="modal-close" onclick="closeUploadModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="uploadProgress">
                    <!-- 动态生成的上传进度项 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 图片预览模态框 -->
    <div id="imagePreviewModal" class="modal" style="display: none;">
        <div class="modal-backdrop" onclick="imageFinder.closeImagePreview()"></div>
        <div class="image-preview-content">
            <div class="preview-header">
                <h3 id="previewImageName">图片预览</h3>
                <div class="preview-actions">
                    <button class="btn-icon" onclick="imageFinder.toggleFavorite()" id="favoriteBtn">
                        <i class="fas fa-star"></i>
                    </button>
                    <button class="btn-icon" onclick="imageFinder.downloadCurrentImage()">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="btn-icon" onclick="imageFinder.copyImageLink()">
                        <i class="fas fa-link"></i>
                    </button>
                    <button class="btn-icon" onclick="imageFinder.closeImagePreview()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="preview-body">
                <img id="previewImage" src="" alt="预览图片">
                <div class="preview-info">
                    <div class="info-item">
                        <span class="label">文件大小:</span>
                        <span id="previewSize">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">上传时间:</span>
                        <span id="previewDate">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">图片链接:</span>
                        <input type="text" id="previewUrl" readonly onclick="this.select()">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 右键菜单 - 简化版 -->
    <div id="contextMenu" class="context-menu" style="display: none;">
        <ul>
            <li class="menu-item" data-action="preview">
                <i class="fas fa-eye"></i>
                <span>预览</span>
            </li>
            <li class="menu-item" data-action="favorite">
                <i class="fas fa-star"></i>
                <span>收藏/取消收藏</span>
            </li>
            <li class="menu-item" data-action="download">
                <i class="fas fa-download"></i>
                <span>下载</span>
            </li>
            <li class="menu-item" data-action="copy">
                <i class="fas fa-link"></i>
                <span>复制链接</span>
            </li>
            <li class="separator"></li>
            <li class="menu-item danger" data-action="delete">
                <i class="fas fa-trash"></i>
                <span>删除</span>
            </li>
        </ul>
    </div>

    <!-- 通知容器 -->
    <div id="notifications" class="notifications"></div>

    <script src="simple-app.js"></script>
</body>
</html>
